{% extends "base.html" %}

{%block start  %}
{% load static %}
   
    <link rel="stylesheet" href="{% static 'css/addtocart.css' %}" type="text/css" />
    <link rel="stylesheet" href="{% static 'css/cart.css' %}" type="text/css" />
    

<main class="main-container">
    <section class="restaurants">
        <div class="container">
            <div class="restaurant-list">
                {% for item in items %}
                <div class="place">
                    <a onclick="quickview('{{item.id}}')" id="{{item.id}}" class="place-link">
                        <div class="list-item">
                            <div class="item-content" >
                                <div class="top-img">
                                    <img class="_2tuBw _12_oN" alt="La Pino'z Pizza"
                                        src="/media/{{item.image}}"
                                        width="254" height="160">
                                </div>
                                <div class="status" style="
                                background: rgb(58, 60, 65);
                                color: rgb(255, 255, 255);
                                border-color: rgb(30, 32, 35) transparent;">
                                    <div class="status-title">Promoted</div>
                                </div>
                                <div class="place-name-div">
                                    <div class="name" id="itemName_{{item.id}}">{{item.itemName}}</div>
                                    <div id="receipe_{{item.id}}" class="food-items"
                                        title="Italian, Pizzas, Fast Food, Mexican, Desserts, Beverages">
                                        {{item.receipe}}</div>
                                </div>
                                <div class="info-div">
                                    <div class="rating">
                                        <span class="icon-star"><i class="fa-solid fa-star"></i></span>
                                        <span>3.8</span>
                                    </div>
                                    <div>•</div>
                                    <div>42 MINS</div>
                                    <div>•</div>
                                    <div id="price_{{item.id}}" class="price">₹{{item.price}}</div>
                                </div>
                                <div class="offer-div">
                                    <span class="icon-offer-filled"><i class="fa-solid fa-tag"></i></span>
                                    <span class="offer-text">50% off | Use WELCOME50</span>
                                </div>
                                
                            </div>
                            
                            <div class="quick-view">
                                <span role="button" aria-label="Open" class="view-btn">QUICK VIEW</span>
                            </div>
                      
                        </div>
                    </a>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>
    <div id="foodmenu"></div>

    </main>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>

        function closemodal()
        {
            debugger;
            $("#exampleModal").modal('hide');
           $(".modal-backdrop").remove();
        }
        
        
        function quickview(id)
                {
                    debugger;
        
                       
                    $.ajax({
                        url: '/quickview/',  // URL to the Django view
                        type: 'GET',
                        data:{"id":id},
                        success: function (response) {
                             $('#foodmenu').html(response);
                            $('#exampleModal').modal('show');
                            
                           
                            //data-toggle="modal"  data-target="#exampleModal"
                              // Insert rendered HTML into div
                        },
                        error: function (error) {
                            console.log(error);
                        }
                    });
                }
        
        function addorderitems(id){
        
            var qty=$("#pqty_"+id)[0].innerText
            var csrfToken = '{{ csrf_token }}';
        
            $.ajax({
                        url: '/addorder/',  // URL to the Django view
                        type: 'POST',
                        data:{
                            "id":id,
                            "itemquantity":qty,
                            'csrfmiddlewaretoken': csrfToken
                        },
                        
                        success: function (response) {
                            
                              // Insert rendered HTML into div
                        },
                        error: function (error) {
                            console.log(error);
                        }
                    });
        
        }
        
        function cartbutton()
                {
                    debugger;
                    var $addQuantity = $(".btn-quantity.plus")
                   var  $minusQuantity = $(".btn-quantity.minus")
        
         
            $('#btn').click(function() {
                $('#btn').toggleClass("cart_clk");
        
            });
           // $("#crtdiv").one("click", function() {
                $('.cart .fa').attr('data-before', '1');
            //});
        
            var prnum = $('.num').text();
        
            $('.inc').click(function() {
                debugger;
                if (prnum >= 0) {
                    prnum++;
                    $('.num').text(prnum);
                    document.getElementById("cart-count").textContent = prnum;
                    $('.cart .fa').attr('data-before', prnum);
                }
        
            });
            $('.dec').click(function() {
                debugger;
                if (prnum >0) {
                    prnum--;
                    $('.num').text(prnum);
                    document.getElementById("cart-count").textContent = prnum;
                    $('.cart .fa').attr('data-before', prnum);
                }
        
            });
        
        
            }

            </script>

{% endblock %}

